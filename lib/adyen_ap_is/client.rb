# adyen_ap_is
#
# This file was automatically generated by APIMATIC v3.0 (
# https://www.apimatic.io ).

module AdyenApIs
  #  adyen_ap_is client class.
  class Client
    include CoreLibrary
    attr_reader :config, :auth_managers

    def user_agent_detail
      config.user_agent_detail
    end

    # Access to payments controller.
    # @return [PaymentsApi] Returns the controller instance.
    def payments
      @payments ||= PaymentsApi.new @global_configuration
    end

    # Access to donations controller.
    # @return [DonationsApi] Returns the controller instance.
    def donations
      @donations ||= DonationsApi.new @global_configuration
    end

    # Access to payment_links controller.
    # @return [PaymentLinksApi] Returns the controller instance.
    def payment_links
      @payment_links ||= PaymentLinksApi.new @global_configuration
    end

    # Access to modifications controller.
    # @return [ModificationsApi] Returns the controller instance.
    def modifications
      @modifications ||= ModificationsApi.new @global_configuration
    end

    # Access to recurring controller.
    # @return [RecurringApi] Returns the controller instance.
    def recurring
      @recurring ||= RecurringApi.new @global_configuration
    end

    # Access to orders controller.
    # @return [OrdersApi] Returns the controller instance.
    def orders
      @orders ||= OrdersApi.new @global_configuration
    end

    # Access to utility controller.
    # @return [UtilityApi] Returns the controller instance.
    def utility
      @utility ||= UtilityApi.new @global_configuration
    end

    # Access to account_company_level controller.
    # @return [AccountCompanyLevelApi] Returns the controller instance.
    def account_company_level
      @account_company_level ||= AccountCompanyLevelApi.new @global_configuration
    end

    # Access to account_merchant_level controller.
    # @return [AccountMerchantLevelApi] Returns the controller instance.
    def account_merchant_level
      @account_merchant_level ||= AccountMerchantLevelApi.new @global_configuration
    end

    # Access to account_store_level controller.
    # @return [AccountStoreLevelApi] Returns the controller instance.
    def account_store_level
      @account_store_level ||= AccountStoreLevelApi.new @global_configuration
    end

    # Access to payout_settings_merchant_level controller.
    # @return [PayoutSettingsMerchantLevelApi] Returns the controller instance.
    def payout_settings_merchant_level
      @payout_settings_merchant_level ||= PayoutSettingsMerchantLevelApi.new @global_configuration
    end

    # Access to users_company_level controller.
    # @return [UsersCompanyLevelApi] Returns the controller instance.
    def users_company_level
      @users_company_level ||= UsersCompanyLevelApi.new @global_configuration
    end

    # Access to users_merchant_level controller.
    # @return [UsersMerchantLevelApi] Returns the controller instance.
    def users_merchant_level
      @users_merchant_level ||= UsersMerchantLevelApi.new @global_configuration
    end

    # Access to my_api_credential controller.
    # @return [MyApiCredentialApi] Returns the controller instance.
    def my_api_credential
      @my_api_credential ||= MyApiCredentialApi.new @global_configuration
    end

    # Access to api_credentials_company_level controller.
    # @return [ApiCredentialsCompanyLevelApi] Returns the controller instance.
    def api_credentials_company_level
      @api_credentials_company_level ||= ApiCredentialsCompanyLevelApi.new @global_configuration
    end

    # Access to api_credentials_merchant_level controller.
    # @return [ApiCredentialsMerchantLevelApi] Returns the controller instance.
    def api_credentials_merchant_level
      @api_credentials_merchant_level ||= ApiCredentialsMerchantLevelApi.new @global_configuration
    end

    # Access to api_key_company_level controller.
    # @return [ApiKeyCompanyLevelApi] Returns the controller instance.
    def api_key_company_level
      @api_key_company_level ||= ApiKeyCompanyLevelApi.new @global_configuration
    end

    # Access to api_key_merchant_level controller.
    # @return [ApiKeyMerchantLevelApi] Returns the controller instance.
    def api_key_merchant_level
      @api_key_merchant_level ||= ApiKeyMerchantLevelApi.new @global_configuration
    end

    # Access to client_key_company_level controller.
    # @return [ClientKeyCompanyLevelApi] Returns the controller instance.
    def client_key_company_level
      @client_key_company_level ||= ClientKeyCompanyLevelApi.new @global_configuration
    end

    # Access to client_key_merchant_level controller.
    # @return [ClientKeyMerchantLevelApi] Returns the controller instance.
    def client_key_merchant_level
      @client_key_merchant_level ||= ClientKeyMerchantLevelApi.new @global_configuration
    end

    # Access to allowed_origins_company_level controller.
    # @return [AllowedOriginsCompanyLevelApi] Returns the controller instance.
    def allowed_origins_company_level
      @allowed_origins_company_level ||= AllowedOriginsCompanyLevelApi.new @global_configuration
    end

    # Access to allowed_origins_merchant_level controller.
    # @return [AllowedOriginsMerchantLevelApi] Returns the controller instance.
    def allowed_origins_merchant_level
      @allowed_origins_merchant_level ||= AllowedOriginsMerchantLevelApi.new @global_configuration
    end

    # Access to webhooks_company_level controller.
    # @return [WebhooksCompanyLevelApi] Returns the controller instance.
    def webhooks_company_level
      @webhooks_company_level ||= WebhooksCompanyLevelApi.new @global_configuration
    end

    # Access to webhooks_merchant_level controller.
    # @return [WebhooksMerchantLevelApi] Returns the controller instance.
    def webhooks_merchant_level
      @webhooks_merchant_level ||= WebhooksMerchantLevelApi.new @global_configuration
    end

    # Access to payment_methods_merchant_level controller.
    # @return [PaymentMethodsMerchantLevelApi] Returns the controller instance.
    def payment_methods_merchant_level
      @payment_methods_merchant_level ||= PaymentMethodsMerchantLevelApi.new @global_configuration
    end

    # Access to terminals_terminal_level controller.
    # @return [TerminalsTerminalLevelApi] Returns the controller instance.
    def terminals_terminal_level
      @terminals_terminal_level ||= TerminalsTerminalLevelApi.new @global_configuration
    end

    # Access to terminal_actions_company_level controller.
    # @return [TerminalActionsCompanyLevelApi] Returns the controller instance.
    def terminal_actions_company_level
      @terminal_actions_company_level ||= TerminalActionsCompanyLevelApi.new @global_configuration
    end

    # Access to terminal_actions_terminal_level controller.
    # @return [TerminalActionsTerminalLevelApi] Returns the controller instance.
    def terminal_actions_terminal_level
      @terminal_actions_terminal_level ||= TerminalActionsTerminalLevelApi.new @global_configuration
    end

    # Access to terminal_orders_company_level controller.
    # @return [TerminalOrdersCompanyLevelApi] Returns the controller instance.
    def terminal_orders_company_level
      @terminal_orders_company_level ||= TerminalOrdersCompanyLevelApi.new @global_configuration
    end

    # Access to terminal_orders_merchant_level controller.
    # @return [TerminalOrdersMerchantLevelApi] Returns the controller instance.
    def terminal_orders_merchant_level
      @terminal_orders_merchant_level ||= TerminalOrdersMerchantLevelApi.new @global_configuration
    end

    # Access to terminal_settings_company_level controller.
    # @return [TerminalSettingsCompanyLevelApi] Returns the controller instance.
    def terminal_settings_company_level
      @terminal_settings_company_level ||= TerminalSettingsCompanyLevelApi.new @global_configuration
    end

    # Access to terminal_settings_merchant_level controller.
    # @return [TerminalSettingsMerchantLevelApi] Returns the controller instance.
    def terminal_settings_merchant_level
      @terminal_settings_merchant_level ||= TerminalSettingsMerchantLevelApi.new @global_configuration
    end

    # Access to terminal_settings_store_level controller.
    # @return [TerminalSettingsStoreLevelApi] Returns the controller instance.
    def terminal_settings_store_level
      @terminal_settings_store_level ||= TerminalSettingsStoreLevelApi.new @global_configuration
    end

    # Access to terminal_settings_terminal_level controller.
    # @return [TerminalSettingsTerminalLevelApi] Returns the controller instance.
    def terminal_settings_terminal_level
      @terminal_settings_terminal_level ||= TerminalSettingsTerminalLevelApi.new @global_configuration
    end

    # Access to android_files_company_level controller.
    # @return [AndroidFilesCompanyLevelApi] Returns the controller instance.
    def android_files_company_level
      @android_files_company_level ||= AndroidFilesCompanyLevelApi.new @global_configuration
    end

    # Access to split_configuration_merchant_level controller.
    # @return [SplitConfigurationMerchantLevelApi] Returns the controller instance.
    def split_configuration_merchant_level
      @split_configuration_merchant_level ||= SplitConfigurationMerchantLevelApi.new @global_configuration
    end

    def initialize(
      connection: nil, adapter: :net_http_persistent, timeout: 30,
      max_retries: 0, retry_interval: 1, backoff_factor: 2,
      retry_statuses: [408, 413, 429, 500, 502, 503, 504, 521, 522, 524],
      retry_methods: %i[get put], http_callback: nil, proxy_settings: nil,
      logging_configuration: nil, environment: Environment::PRODUCTION,
      api_key_auth_credentials: nil, basic_auth_credentials: nil, config: nil
    )
      @config = if config.nil?
                  Configuration.new(
                    connection: connection, adapter: adapter, timeout: timeout,
                    max_retries: max_retries, retry_interval: retry_interval,
                    backoff_factor: backoff_factor,
                    retry_statuses: retry_statuses,
                    retry_methods: retry_methods, http_callback: http_callback,
                    proxy_settings: proxy_settings,
                    logging_configuration: logging_configuration,
                    environment: environment,
                    api_key_auth_credentials: api_key_auth_credentials,
                    basic_auth_credentials: basic_auth_credentials
                  )
                else
                  config
                end
      user_agent_params = BaseApi.user_agent_parameters

      @global_configuration = GlobalConfiguration.new(client_configuration: @config)
                                                 .base_uri_executor(@config.method(:get_base_uri))
                                                 .global_errors(BaseApi::GLOBAL_ERRORS)
                                                 .user_agent(BaseApi.user_agent,
                                                             agent_parameters: user_agent_params)

      initialize_auth_managers(@global_configuration)
      @global_configuration = @global_configuration.auth_managers(@auth_managers)
    end

    # Initializes the auth managers hash used for authenticating API calls.
    # @param [GlobalConfiguration] global_config The global configuration of the SDK)
    def initialize_auth_managers(global_config)
      @auth_managers = {}
      http_client_config = global_config.client_configuration
      %w[ApiKeyAuth BasicAuth].each { |auth| @auth_managers[auth] = nil }
      @auth_managers['ApiKeyAuth'] = ApiKeyAuth.new(http_client_config.api_key_auth_credentials)
      @auth_managers['BasicAuth'] = BasicAuth.new(http_client_config.basic_auth_credentials)
    end

    # Creates a client directly from environment variables.
    def self.from_env(**overrides)
      default_config = Configuration.build_default_config_from_env
      new_config = default_config.clone_with(**overrides)
      new(config: new_config)
    end
  end
end
