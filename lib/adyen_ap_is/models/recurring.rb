# adyen_ap_is
#
# This file was automatically generated by APIMATIC v3.0 (
# https://www.apimatic.io ).

require 'date'
module AdyenApIs
  # Recurring Model.
  class Recurring < BaseModel
    SKIP = Object.new
    private_constant :SKIP

    # The type of recurring contract to be used.
    # Possible values:
    # * `ONECLICK` – Payment details can be used to initiate a one-click
    # payment, where the shopper enters the [card security code
    # (CVC/CVV)](https://docs.adyen.com/payments-fundamentals/payment-glossary#c
    # ard-security-code-cvc-cvv-cid).
    # * `RECURRING` – Payment details can be used without the card security code
    # to initiate [card-not-present
    # transactions](https://docs.adyen.com/payments-fundamentals/payment-glossar
    # y#card-not-present-cnp).
    # * `ONECLICK,RECURRING` – Payment details can be used regardless of whether
    # the shopper is on your site or not.
    # * `PAYOUT` – Payment details can be used to [make a
    # payout](https://docs.adyen.com/online-payments/online-payouts).
    # * `EXTERNAL` - Use this when you store payment details and send the raw
    # card number or network token directly in your API request.
    # @return [Contract]
    attr_accessor :contract

    # A descriptive name for this detail.
    # @return [String]
    attr_accessor :recurring_detail_name

    # Date after which no further authorisations shall be performed. Only for 3D
    # Secure 2.
    # @return [DateTime]
    attr_accessor :recurring_expiry

    # Minimum number of days between authorisations. Only for 3D Secure 2.
    # @return [String]
    attr_accessor :recurring_frequency

    # The name of the token service.
    # @return [TokenService]
    attr_accessor :token_service

    # A mapping from model property names to API property names.
    def self.names
      @_hash = {} if @_hash.nil?
      @_hash['contract'] = 'contract'
      @_hash['recurring_detail_name'] = 'recurringDetailName'
      @_hash['recurring_expiry'] = 'recurringExpiry'
      @_hash['recurring_frequency'] = 'recurringFrequency'
      @_hash['token_service'] = 'tokenService'
      @_hash
    end

    # An array for optional fields
    def self.optionals
      %w[
        contract
        recurring_detail_name
        recurring_expiry
        recurring_frequency
        token_service
      ]
    end

    # An array for nullable fields
    def self.nullables
      []
    end

    def initialize(contract: SKIP, recurring_detail_name: SKIP,
                   recurring_expiry: SKIP, recurring_frequency: SKIP,
                   token_service: SKIP)
      @contract = contract unless contract == SKIP
      @recurring_detail_name = recurring_detail_name unless recurring_detail_name == SKIP
      @recurring_expiry = recurring_expiry unless recurring_expiry == SKIP
      @recurring_frequency = recurring_frequency unless recurring_frequency == SKIP
      @token_service = token_service unless token_service == SKIP
    end

    # Creates an instance of the object from a hash.
    def self.from_hash(hash)
      return nil unless hash

      # Extract variables from the hash.
      contract = hash.key?('contract') ? hash['contract'] : SKIP
      recurring_detail_name =
        hash.key?('recurringDetailName') ? hash['recurringDetailName'] : SKIP
      recurring_expiry = if hash.key?('recurringExpiry')
                           (DateTimeHelper.from_rfc3339(hash['recurringExpiry']) if hash['recurringExpiry'])
                         else
                           SKIP
                         end
      recurring_frequency =
        hash.key?('recurringFrequency') ? hash['recurringFrequency'] : SKIP
      token_service = hash.key?('tokenService') ? hash['tokenService'] : SKIP

      # Create object from extracted values.
      Recurring.new(contract: contract,
                    recurring_detail_name: recurring_detail_name,
                    recurring_expiry: recurring_expiry,
                    recurring_frequency: recurring_frequency,
                    token_service: token_service)
    end

    def to_custom_recurring_expiry
      DateTimeHelper.to_rfc3339(recurring_expiry)
    end

    # Provides a human-readable string representation of the object.
    def to_s
      class_name = self.class.name.split('::').last
      "<#{class_name} contract: #{@contract}, recurring_detail_name: #{@recurring_detail_name},"\
      " recurring_expiry: #{@recurring_expiry}, recurring_frequency: #{@recurring_frequency},"\
      " token_service: #{@token_service}>"
    end

    # Provides a debugging-friendly string with detailed object information.
    def inspect
      class_name = self.class.name.split('::').last
      "<#{class_name} contract: #{@contract.inspect}, recurring_detail_name:"\
      " #{@recurring_detail_name.inspect}, recurring_expiry: #{@recurring_expiry.inspect},"\
      " recurring_frequency: #{@recurring_frequency.inspect}, token_service:"\
      " #{@token_service.inspect}>"
    end
  end
end
